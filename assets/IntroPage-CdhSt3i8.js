import{_ as $}from"./etml-BYyaM1Mv.js";import{f as E,r as x,g as C,a as w,e,b as h,w as g,d as t,t as V,v,h as f,o as y,i as k,j as L,n as D}from"./index-DLuxh3t_.js";import{u as N,L as U,R as K}from"./auth-usQJemLc.js";const M={class:"flex flex-col gap-2"},T={key:0,class:"text-red-500"},B=["disabled"],I={__name:"LoginForm",setup(S){const b=N(),u=E(),d=x(""),o=x(""),{mutate:a,loading:p,error:r,onDone:m}=C(U,()=>({variables:{email:d.value,password:o.value}}));return m(c=>{b.login(c.data.login.token),u.component=null}),(c,s)=>(y(),w("div",M,[s[5]||(s[5]=e("h2",{class:"text-xl font-semibold text-center"},"Connexion",-1)),t(r)?(y(),w("span",T,V(t(r).message),1)):h("",!0),s[6]||(s[6]=e("label",null,"E-mail :",-1)),g(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>d.value=i),onKeyup:s[1]||(s[1]=f((...i)=>t(a)&&t(a)(...i),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,d.value]]),s[7]||(s[7]=e("label",null,"Mot de passe :",-1)),g(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=i=>o.value=i),onKeyup:s[3]||(s[3]=f((...i)=>t(a)&&t(a)(...i),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,o.value]]),e("button",{onClick:s[4]||(s[4]=(...i)=>t(a)&&t(a)(...i)),class:"p-2 mt-2 text-white rounded-sm bg-etml hover:opacity-90 active:opacity-80",disabled:t(p)}," Se connecter ",8,B)]))}},R={class:"flex flex-col gap-2"},P={key:0,class:"text-red-500"},z=["disabled"],j={__name:"RegisterForm",setup(S){const b=N(),u=E(),d=x(""),o=x(""),a=x(""),p=x(""),{mutate:r,loading:m,error:c,onDone:s}=C(K,()=>({variables:{email:d.value,password:o.value,firstName:a.value,lastName:p.value}}));return s(i=>{b.login(i.data.register.token),u.component=null}),(i,l)=>(y(),w("div",R,[l[9]||(l[9]=e("h2",{class:"text-xl font-semibold text-center"},"Inscription",-1)),t(c)?(y(),w("span",P,V(t(c).message),1)):h("",!0),l[10]||(l[10]=e("label",null,[k("E-mail"),e("span",{class:"text-etml"},"*"),k(" :")],-1)),g(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=n=>d.value=n),onKeyup:l[1]||(l[1]=f((...n)=>t(r)&&t(r)(...n),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,d.value]]),l[11]||(l[11]=e("label",null,[k("Mot de passe"),e("span",{class:"text-etml"},"*"),k(" :")],-1)),g(e("input",{type:"password","onUpdate:modelValue":l[2]||(l[2]=n=>o.value=n),onKeyup:l[3]||(l[3]=f((...n)=>t(r)&&t(r)(...n),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,o.value]]),l[12]||(l[12]=e("label",null,"PrÃ©nom :",-1)),g(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=n=>a.value=n),onKeyup:l[5]||(l[5]=f((...n)=>t(r)&&t(r)(...n),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,a.value]]),l[13]||(l[13]=e("label",null,"Nom :",-1)),g(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=n=>p.value=n),onKeyup:l[7]||(l[7]=f((...n)=>t(r)&&t(r)(...n),["enter"])),class:"p-2 border rounded-sm"},null,544),[[v,p.value]]),l[14]||(l[14]=e("span",{class:"text-sm text-etml"},"*champs obligatoires",-1)),e("button",{onClick:l[8]||(l[8]=(...n)=>t(r)&&t(r)(...n)),class:"p-2 mt-2 text-white rounded-sm bg-etml hover:opacity-90 active:opacity-80",disabled:t(m)}," S'incrire ",8,z)]))}},A={class:"flex flex-col text-etml xl:ml-[50%]"},F={class:"relative flex-grow"},G={class:"flex items-end gap-1"},Y=["value"],q=["value"],O={class:"flex items-end gap-1"},H=["value"],J={key:0,class:"absolute top-0 flex flex-col items-center justify-center w-full h-full gap-2"},Q={class:"flex gap-2"},_={__name:"IntroPage",setup(S){const b=E(),u=N();return(d,o)=>{var a,p,r;return y(),w("div",A,[o[8]||(o[8]=L('<div class="flex items-start grid-cols-3 gap-1 mb-8"><img src="'+$+'" alt="ETML" loading="lazy" class="h-8"><div class="col-span-2"><h1 class="leading-2/3 font-logo"><br>Ecole Technique <br>Ecole des metiers Lausanne </h1><hr class="my-8 border-etml"><div class="flex flex-col gap-2 text-sm"><ul><li><a href="https://etml.burkhalter.dev/" class="hover:underline"> etml.burkhalter.dev </a></li><li>CodÃ© avec ğŸ’™ par votre dÃ©lÃ©guÃ© Yannis Burkhalter</li></ul><ul><li> E-mail : <a href="mailto:yannis@burkhalter.dev" class="hover:underline"> yannis@burkhalter.dev </a></li><li> Discord : <a href="https://discord.com/users/317230160124313610" target="_blank" class="hover:underline"> burkhalter </a></li></ul><ul><li>Â© 2023 Yannis Burkhalter</li><li> Le logo et les images appartiennent Ã  <a href="https://www.etml.ch/" target="_blank" class="hover:underline"> l&#39;Ã©cole </a></li></ul></div></div></div><h2 class="mb-4 text-3xl font-light">Agenda</h2>',2)),e("div",F,[e("div",{class:D(["flex flex-col h-full gap-6 p-2 -m-2 duration-300 ease-linear rounded",{"bg-slate-200 blur-sm grayscale":!t(u).logged}])},[e("div",G,[o[3]||(o[3]=e("label",null,"PrÃ©nom :",-1)),e("input",{type:"text",value:(a=t(u).user)==null?void 0:a.firstName,readonly:"",class:"flex-grow w-0 px-2 text-xl bg-transparent border-b outline-none text-bic-blue border-etml font-handwriting"},null,8,Y),o[4]||(o[4]=e("label",null,"Nom :",-1)),e("input",{type:"text",value:(p=t(u).user)==null?void 0:p.lastName,readonly:"",class:"flex-grow w-0 px-2 text-xl bg-transparent border-b outline-none text-bic-blue border-etml font-handwriting"},null,8,q)]),e("div",O,[o[5]||(o[5]=e("label",null,"E-mail :",-1)),e("input",{type:"text",value:(r=t(u).user)==null?void 0:r.email,readonly:"",class:"flex-grow w-0 px-2 text-xl bg-transparent border-b outline-none text-bic-blue border-etml font-handwriting"},null,8,H)]),o[6]||(o[6]=e("div",{class:"flex items-end gap-1"},[e("label",null,"Classe :"),e("select",{class:"flex-grow w-0 px-2 text-xl bg-transparent border-b outline-none text-bic-blue border-etml font-handwriting"},[e("option",{selected:"",hidden:""}),e("option",null,"MTU1E"),e("option",null,"MTU2E")])],-1)),o[7]||(o[7]=e("textarea",{placeholder:"Bio...",readonly:"",class:"flex-grow p-2 bg-transparent border outline-none resize-none text-bic-blue border-etml font-handwriting"},null,-1)),e("button",{onClick:o[0]||(o[0]=(...m)=>t(u).logout&&t(u).logout(...m)),class:"w-full p-2 -mt-2 border rounded border-etml hover:bg-etml hover:text-white"}," DÃ©connexion ")],2),t(u).logged?h("",!0):(y(),w("div",J,[e("div",Q,[e("button",{onClick:o[1]||(o[1]=m=>t(b).component=I),class:"w-32 p-2 text-white rounded bg-etml hover:brightness-125"}," Connexion "),e("button",{onClick:o[2]||(o[2]=m=>t(b).component=j),class:"w-32 p-2 text-white rounded bg-etml hover:brightness-125"}," Inscription ")])]))])])}}};export{_ as default};
